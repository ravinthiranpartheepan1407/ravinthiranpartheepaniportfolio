<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Ravinthiran Partheepan - Smartcity Development</title>
  <link rel="stylesheet" href="https://js.arcgis.com/4.21/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.21/"></script>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Ravinthiran Partheepan - Home</title>
  <meta content="" name="description">
  <meta content="" name="keywords">


  <link href="/images/icon.png" rel="icon">
  <link href="/images/icon.png" rel="apple-touch-icon">


  <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">


  <link href="/assets/vendor/aoss/aos.css" rel="stylesheet">
  <link href="/assets/vendor/bootstraps/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap-iconss/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/vendor/boxiconss/css/boxicons.min.css" rel="stylesheet">
  <link href="/assets/vendor/swipers/swiper-bundle.min.css" rel="stylesheet">


  <link href="/assets/css/styles.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <style>

  #header{
    background: linear-gradient(to right, #100028 50%, rgba(61, 179, 197, 0.8) 150%);
  }
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }

    .esri-editor .esri-item-list__scroller {
      max-height: 350px;
    }

    #configurationDiv {
      padding: 5px;
      text-align: left;
      width: 100%;
    }

    #info {
      padding: 7px;
    }
    .esri-attribution__powered-by{
      visibility: hidden;
    }
  </style>
  <script>
    require([
      "esri/layers/FeatureLayer",
      "esri/WebScene",
      "esri/views/SceneView",
      "esri/widgets/Editor",
      "esri/widgets/Expand",
      "esri/core/watchUtils"
    ], (FeatureLayer, WebScene, SceneView, Editor, Expand, watchUtils) => {

      let checkboxArray = [];
      let snapSource = [];


      const enabledSnapDiv = document.getElementById("enabledcheckbox");
      const selfSnapDiv = document.getElementById("selfsnappingcheckbox");
      const featureSnapDiv = document.getElementById("featuresnappingcheckbox");


      const webscene = new WebScene({
        portalItem: {
          id: "206a6a13162c4d9a95ea6a87abad2437"
        }
      });

      const recreationLayer = new FeatureLayer({
        title: "Recreation",
        url: "https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/EditableFeatures3D/FeatureServer/1",
        elevationInfo: {
          mode: "absolute-height"
        },
        renderer: {
          type: "unique-value",
          field: "TYPE",
          visualVariables: [{

            type: "size",
            field: "SIZE",
            axis: "height",
            valueUnit: "meters"
          }, {

            type: "rotation",
            field: "ROTATION"
          }],
          uniqueValueInfos: [{
            value: "1",
            label: "Slide",
            symbol: {
              type: "point-3d",
              symbolLayers: [{
                type: "object",
                resource: {
                  href: "https://static.arcgis.com/arcgis/styleItems/Recreation/gltf/resource/Slide.glb"
                }
              }],
              styleOrigin: {
                styleName: "EsriRecreationStyle",
                name: "Slide"
              }
            }
          }, {
            value: "2",
            label: "Swing",
            symbol: {
              type: "point-3d",
              symbolLayers: [{
                type: "object",
                resource: {
                  href: "https://static.arcgis.com/arcgis/styleItems/Recreation/gltf/resource/Swing.glb"
                }
              }],
              styleOrigin: {
                styleName: "EsriRecreationStyle",
                name: "Swing"
              }
            }
          }]
        }
      });

      webscene.add(recreationLayer);

      const view = new SceneView({
        container: "viewDiv",
        qualityProfile: "high",
        map: webscene
      });

      view.when(() => {
        view.popup.autoOpenEnabled = false;

        const editor = new Editor({
          view: view


          // snappingOptions: { // autocasts to SnappingOptions
          //   enabled: true,
          //   selfEnabled: true,
          //   featureEnabled: true,
          //   featureSources: [{ layer: recreationLayer}]
          // }
        });

        view.ui.add(editor, "top-right");


        view.map.loadAll().then(() => {
          view.map.allLayers.forEach((layer) => {
            if (
              layer.visible &&
              (layer.geometryType == "polygon" ||
                layer.geometryType == "polyline" ||
                layer.geometryType == "point")
            ) {
              const table = document
                .getElementById("configurationTable")
                .getElementsByTagName("tbody")[0];
              const row = table.insertRow();
              let cell = row.insertCell();
              cell.style = "padding-left: 10px";
              const label = document.createElement("label");
              label.innerHTML = layer.title + " (" + layer.geometryType + ")";
              cell.appendChild(label);
              let checkbox = document.createElement("input");
              checkbox.type = "checkbox";
              checkbox.disabled = true;
              checkbox.name = layer.title;
              checkbox.id = layer.uid;

              cell = row.insertCell();
              cell.appendChild(checkbox);
              checkboxArray.push(checkbox);


              snapSource.push({
                layer: layer
              });

              checkbox.addEventListener("change", (event) => {

                if (event.target.checked) {
                  snapSource.push({
                    layer: layer
                  });
                } else {

                  const index = getIndex(snapSource, layer.id);
                  snapSource.splice(index, 1);
                }
                editor.snappingOptions.featureSources = snapSource;
              });
            }
          });
        });


        watchUtils.init(editor.snappingOptions, "enabled", (value) => {
          enabledSnapDiv.checked = editor.snappingOptions.enabled;
          editor.snappingOptions.featureSources = snapSource;
        });

        enabledSnapDiv.addEventListener("change", (event) => {
          editor.snappingOptions.enabled = event.target.checked ? true : false;


          selfSnapDiv.disabled = !editor.snappingOptions.enabled;
          selfSnapDiv.checked = editor.snappingOptions.enabled;

          featureSnapDiv.disabled = !editor.snappingOptions.enabled;
          featureSnapDiv.checked = editor.snappingOptions.enabled;


          checkboxArray.forEach((chkBox) => {
            chkBox.disabled = !editor.snappingOptions.enabled;
            chkBox.checked = editor.snappingOptions.enabled;
          });
        });



        selfSnapDiv.addEventListener("change", (event) => {
          editor.snappingOptions.selfEnabled = event.target.checked ? true : false;
        });


        featureSnapDiv.addEventListener("change", (event) => {
          editor.snappingOptions.featureEnabled = event.target.checked ? true : false;
        });


        watchUtils.watch(editor.snappingOptions, "featureEnabled", (value) => {

          console.log("featureEnabled changed to: ", value);
          if (!value) {
            checkboxArray.forEach((checkDiv) => {
              checkDiv.disabled = true;
            });
          } else {

            checkboxArray.forEach((checkDiv) => {
              checkDiv.disabled = false;
            });
          }
        });

        const configurationExpand = new Expand({
          expandIconClass: "esri-icon-settings2",
          expandTooltip: "Show snapping configuration",
          expanded: false,
          view: view,
          content: document.getElementById("configurationDiv")
        });

        view.ui.add([{
          component: configurationExpand,
          position: "bottom-right",
          index: 0
        }, {
          component: "info",
          position: "bottom-right",
          index: 1
        }]);


        configurationExpand.watch("expanded", (value) => {
          if (value) {
            document.getElementById("info").classList.add("esri-hidden");
          } else {
            document.getElementById("info").classList.remove("esri-hidden");
          }
        });
      });


      function getIndex(source, layerId) {
        const layers = source.map((item) => {
          return item.layer.id;
        });
        return layers.indexOf(layerId);
      }

    });
  </script>
</head>

<body>
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex justify-content-between align-items-center">

      <div class="logo">
        <h1><a href="/">Ravinthiran Partheepan</a></h1>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="active " href="index.html">Home</a></li>
          <li><a href="/npm">My-NPM-Packages</a></li>
          <li><a href="/ethapp">Ethereum Shop</a></li>
          <li><a href="https://rarible.com/token/0xf6793da657495ffeff9ee6350824910abc21356c:89924258366811623875109034533533048737172702265033712914275818847697259986946?tab=details">NFT Shop</a></li>
          <li><a href="/shop">Shop</a></li>
          <li><a href="/works">Works</a></li>
          <li><a href="/contact">Contact</a></li>
          <li class="dropdown"><a href="/works"><span>Github</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="https://github.com/ravinthiranpartheepan1407/VPS_mongodb">VPS - Full Stack Web</a></li>
              <li><a href="https://github.com/ravinthiranpartheepan1407/Data-Science-Projects">AI & Machine Learning</a></li>
              <li><a href="https://github.com/ravinthiranpartheepan1407/Full_Stack_Web_Development_Apps">Blockchain Development</a></li>


            </ul>
          </li>

        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>

    </div>
  </header>



  <div id="viewDiv"></div>
  <div id="info" class="esri-widget">
    <b>Snapping configuration &#8594;</b>
  </div>
  <div id="editorDiv"></div>
  <div id="configurationDiv" class="esri-widget">
    <table id="configurationTable">
      <tbody>
        <tr>
          <td>
            <label for="enabledcheckbox" id="enabledcheckboxlabel"><b>SnappingOptions.enabled</b></label>
          </td>
          <td>
            <input type="checkbox" id="enabledcheckbox" />
          </td>
        </tr>
        <tr>
          <td style="padding-left: 5px">
            <label for="selfsnappingcheckbox" id="selfsnappingcheckboxlabel">SnappingOptions.selfEnabled</label>
          </td>
          <td>
            <input type="checkbox" id="selfsnappingcheckbox" disabled="disabled" />
          </td>
        </tr>
        <tr>
          <td style="padding-left: 5px">
            <label for="featuresnappingcheckbox" id="featuresnappingcheckboxlabel">SnappingOptions.featureEnabled</label>
          </td>
          <td>
            <input type="checkbox" id="featuresnappingcheckbox" disabled="disabled" />
          </td>
        </tr>
        <tr>
          <td>
            <hr style="margin:15px;" />
          </td>
        </tr>
        <tr>
          <td>
            <label><b>SnappingOptions.featureSources</b></label>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 5px">
            <label>(layers used for feature snapping)</label>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
          <h3>About Ravinthiran Partheepan</h3>
          <p style="text-align: justify !important;">I am an Artificial Intelligence Researcher, Blockhain ETH Smartcontracts And Dapps Developer, Full Stack Developer, Comic Book Writer and VFX Film Maker</p>
          <p class="social">
            <a href="#"><span class="bi bi-twitter"></span></a>
            <a href="#"><span class="bi bi-facebook"></span></a>
            <a href="#"><span class="bi bi-instagram"></span></a>
            <a href="https://www.linkedin.com/in/ravinthiran-partheepan-8a5100131"><span class="bi bi-linkedin"></span></a>
          </p>
        </div>
        <div class="col-md-7 ms-auto">
          <div class="row site-section pt-0">
            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Navigation</h3>
              <ul class="list-unstyled">
                <li><a href="/shop">Shop</a></li>
                <li><a href="/works">Works</a></li>
                <li><a href="/home"></a>Home</li>
                <li><a href="/contact">Contact</a></li>
              </ul>
            </div>

            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Shop</h3>
              <ul class="list-unstyled">
                <li><a href="/shop">Shop</a></li>
                <li><a href="/ethapp">Ethereum Dapp</a></li>
                <li><a href="/home"></a>Home</li>
                <li><a href="/contact">Contact</a></li>
              </ul>
            </div>

            <div class="col-md-4 mb-4 mb-md-0">
              <h3>Downloads</h3>
              <ul class="list-unstyled">
                <li><a href="#">Get from the Play Store</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row justify-content-center text-center">
        <div class="col-md-7">
          <p class="copyright">&copy; Copyright Ravinthiran Partheepan. All Rights Reserved</p>
          <div class="credits">

            Developed by <a href="/">Ravinthiran Partheepan</a>
          </div>
        </div>
      </div>

    </div>
  </footer>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>





  <script src="/assets/js/mains.js"></script>
  <script>
    (function($){
      $(document).on('contextmenu', 'body', function() {
          return false;
      })
    })(jQuery);
  </script>
</body>

</html>
